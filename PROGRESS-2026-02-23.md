# HanDoc 개선 작업 일일 보고 (2026-02-23)

## 최종 결과 (20:00 기준)
- **점수**: A:2 B:2 C:3 D:15 F:21 (총 43개)
- **통과율**: 9.3% (A+B)
- **작업 시간**: 16시간 (04:00~20:00)
- **커밋 수**: 8개

## 시도한 개선 작업

### 1. 표 렌더링 최적화 (04:00~08:00, 4시간)
- 표 페이지 분할 허용 (page-break-inside: avoid → auto)
- 표 vertical spacing 축소 (line-height 1.4→1.2, padding 감소)
- cellMargin 50% 스케일링
- 표 paragraph CSS 강제 제거 (margin/padding !important)
- **결과**: 페이지 수 약간 개선 (14→10), 하지만 SSIM 개선 미미

### 2. 빈 컨텐츠 제거 (07:00)
- 표 셀 내 빈 paragraph 스킵
- **결과**: 효과 없음

### 3. Word-break 조정 (08:00)
- keep-all → normal + overflow-wrap: anywhere
- **결과**: 효과 없음

### 4. Landscape 방향 처리 (09:00~10:00, 2시간)
- Dimension swap 제거/복원/조건부 처리
- HTML section dimension swap 추가
- **결과**: 페이지 수 변화 없음

### 5. Border 중복 제거 (13:00)
- 표 셀 내 paragraph border 제거
- **결과**: HTML 간소화되었으나 점수 변화 없음

### 6. 이미지 크기 수정 (16:27)
- curSz (display size) 사용으로 변경
- **결과**: 일부 이미지 중심 문서 개선 (삼국의 성장 3→1페이지)

### 7. 폰트 렌더링 개선 (17:xx)
- AppleGothic.ttf 사용
- **결과**: 미미한 개선

### 8. 미세 조정 (18:00~19:00, 2시간)
- Line-height 1.6 → 1.5
- Letter-spacing -0.015em
- **결과**: 테스트 중

## 핵심 발견사항

### F등급 문서 (21개, 49%) - 구조적 문제
**공통점:**
- 복잡한 중첩 표 구조
- 페이지 오버플로우 (2→10페이지 등)
- 학교 양식 문서에 집중

**대표 사례: [별지 2] 취약점 점검 문서**
- 레퍼런스: 2페이지 (portrait)
- HanDoc: 10페이지 (landscape)
- SSIM: 0.14
- 10시간 시도했으나 미해결
- 근본 원인: 표 내부 컨텐츠 렌더링 방식 차이

**단기 해결 불가 이유:**
1. 파서 레벨 문제: 복잡한 표 구조 파싱 미흡
2. 레이아웃 엔진: 표 높이 계산 알고리즘 차이
3. CSS만으로 해결 불가능

### D등급 고득점 문서 (7개) - 개선 가능
**SSIM 0.66~0.69 (C등급 0.70 기준까지 근접):**
- [별지 3] (0.689)
- 가곡 (0.682)
- 종묘제레악 (0.683)
- [별지 1] (0.682)
- svg_template (0.677)
- 브라더_양식 (0.671)
- HwpxTest1 (0.661)

**개선 가능성:**
- 폰트 매칭
- 간격 미세조정
- 색상 보정

## 결론 및 제언

### 현실적 평가
**16시간 작업으로 통과율 9.3% 유지** = 단기간 개선의 한계 도달

### 단기 전략 (1주일)
**D→C 전환 집중**
- 목표: 7개 문서를 C등급으로
- 예상 통과율: 9.3% → 25%
- 방법: 폰트, 간격, 색상 미세조정
- 실현 가능성: 높음

### 중기 전략 (1개월)
**F등급 중 단순 문서부터 해결**
- 단일 표 문서 우선
- 페이지 수가 일치하는 문서부터
- 예상: 5~10개 개선 가능

### 장기 전략 (3개월)
**파서 및 레이아웃 엔진 재설계**
- 복잡한 중첩 표 파싱 개선
- 표 높이 계산 알고리즘 재작성
- 한/글 레퍼런스와 픽셀 단위 비교 분석

## 기술 부채

1. **표 렌더링**: 근본적인 리팩토링 필요
2. **Landscape 처리**: 혼란스러운 dimension swap 로직
3. **폰트 매핑**: 한글 폰트 렌더링 불완전
4. **테스트 자동화**: 회귀 방지 메커니즘 부재

## 다음 작업자를 위한 조언

1. **F등급 구제에 시간 쓰지 마세요** - 단기간 불가능
2. **D등급 고득점부터** - 빠른 성과 가능
3. **표 문서는 피하세요** - 근본 해결 필요
4. **테스트 자주** - 변경마다 전체 비교 실행
5. **Git push 자주** - 롤백 쉽게

---

**작업자**: MJ (COO Agent)
**날짜**: 2026-02-23
**소요 시간**: 16시간
**상태**: 현실적 한계 도달, 전략 전환 필요
