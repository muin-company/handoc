# HanDoc — 요구사항 & 로드맵

> **문서 유형:** 상위 레벨 요구사항 + 비즈니스 로드맵
> **버전:** 1.0 | 2026-02-20
> **승인:** ONE (CEO)

---

## 1. 왜 HanDoc인가

### 문제
- HWP/HWPX는 한국 공공기관·기업의 사실상 표준 문서 포맷
- 한컴오피스 없이 HWP를 다루려면 선택지가 극히 제한적
- 기존 솔루션: 비싸거나(한컴), 불완전하거나(오픈소스), 무겁거나(@ohah/hwpjs 129MB)
- **HWP 뷰어/변환 시장은 실재** — 한컴 외에도 다수 업체가 매출 창출 중

### 기회
- 핵심 라이브러리를 오픈소스로 공개 → 시장의 진입 장벽을 낮춤
- 99%를 무료로 풀어서 개발자 생태계 확보
- 1%의 프리미엄 가치로 수익 창출
- **AI 에이전트 기반 지원** = 전통 SI 대비 10배 빠르고, 10배 저렴

### 무인기업에서의 위치
- **내부 도구로 시작** — 자사 제품(검시AI 등)에서 HWP 문서 처리
- **오픈소스 제품으로 확장** — npm 패키지, 개발자 커뮤니티 형성
- **엔터프라이즈로 수익화** — 유료 기능 + 지원 계약

---

## 2. 비즈니스 모델

### 오픈코어 (99% 오픈소스 + 1% 유료)

**오픈소스 (MIT 라이선스):**
| 기능 | 설명 |
|------|------|
| HWPX 읽기/쓰기 | XML 기반 한글 문서 완전 지원 |
| HWP 5.x 읽기 | 바이너리 한글 문서 텍스트/표/이미지 추출 |
| HWP → HWPX 변환 | 레거시 → 현대 포맷 전환 |
| 브라우저/Node 겸용 | 서버 불필요, 클라이언트에서 직접 처리 |
| TypeScript | 타입 안전, 개발자 친화 |
| 경량 | 순수 JS, 외부 바이너리 의존 없음 |

**유료 (HanDoc Pro / HanDoc Cloud):**
| 기능 | 가치 | 가격 모델 |
|------|------|----------|
| 서버사이드 변환 API | REST API로 대량 변환 | API 콜 기반 |
| PDF 렌더링 | 한컴오피스 수준 출력 품질 | 문서당 과금 |
| 엔터프라이즈 지원 | SLA, 전담 지원, 커스텀 개발 | 연간 라이선스 |
| 100% 호환성 보장 | 공공기관 서식 완벽 렌더링 | 연간 라이선스 |
| 프라이빗 클라우드 | 사내 배포, 데이터 외부 유출 없음 | 연간 라이선스 |
| 웹 에디터 위젯 | 임베더블 HWP 편집기 | 월 구독 |

### 경쟁 우위
| 항목 | 기존 시장 | HanDoc |
|------|----------|--------|
| 비용 | SI 납품 수천만원 + 연간 라이선스 | 오픈소스 무료, Pro 월 수만원~ |
| 지원 속도 | 인간 개발자 → 주 단위 | AI 에이전트 → 시간 단위 |
| 커버리지 | HWP만 또는 HWPX만 | HWP + HWPX 동시 |
| 환경 | 서버 전용 또는 데스크톱 | 브라우저 + Node + 서버 |
| 무게 | @ohah/hwpjs 129MB | 목표 <1MB |

### 경쟁 전략: 시냅소프트를 뺏는다

**시냅소프트 현황 (벤치마크):**
- Document AI 전문 기업, 금융권 점유율 85% (20대 금융사 중 17곳)
- 구글 워크스페이스용 뷰어 100만 사용자
- 삼성SDS 브리티웍스에 공급
- 제품: 문서뷰어 + 문서필터(텍스트 추출) + 에디터 + OCR
- 매출 구조: 연간 라이선스 (수천만원/고객) + SI 프로젝트

**우리의 공격:**
1. 시냅소프트 "문서필터"의 핵심 기능을 오픈소스로 무료 공개
2. 개발자가 npm install로 바로 사용 → "시냅소프트 라이선스 왜 사?"
3. 엔터프라이즈 기능 필요한 고객 → HanDoc Pro (1/10 가격)
4. AI 기반 지원 → 인간 SI 대비 10배 빠르고 저렴

**구도:** Redis vs Redis Labs, MongoDB vs Atlas — 오픈소스가 시장을 만들고, 프리미엄이 수익을 가져감

### 타겟 고객 (순서)

1. **자사 (C)** — 검시AI, 내부 도구에서 HWP 처리
2. **웹 개발자 (A)** — npm install로 바로 사용, GitHub 스타
3. **SaaS 기업** — 문서 관리 시스템에 HWP 뷰어 임베드
4. **공공기관 SI (B)** — 전자문서 시스템 통합, 엔터프라이즈 계약

---

## 3. 요구사항

### 3.1 기능 요구사항 (Functional)

#### FR-01: HWPX 읽기
- HWPX(ZIP/OPC) 파일을 파싱하여 구조화된 문서 모델로 변환
- 텍스트, 단락, 런, 스타일 참조 추출
- 표 구조 (행/열/셀/병합) 추출
- 이미지/OLE 바이너리 데이터 추출
- 머리말/꼬리말, 각주/미주 추출
- **수용 기준:** 한컴오피스 2020+ 생성 HWPX 파일 20종 파싱 성공률 ≥95%

#### FR-02: HWPX 쓰기
- 문서 모델 → HWPX ZIP 파일 생성
- 빌더 API로 프로그래밍 방식 문서 생성
- **수용 기준:** 생성된 HWPX를 한컴오피스에서 정상 열기 성공

#### FR-03: HWP 5.x → HWPX 변환 (Phase 2, 필요 시)
- HWP 5.x OLE2/CFB → HWPX 단방향 변환
- **단일 파이프라인:** HWP 5.x → HWPX 변환 → 기존 HWPX 파서로 처리
- HWP 전용 파서를 별도로 만들지 않음
- Phase 1 범위 아님 — HWPX 파이프라인 완성 후 필요 시 추가

#### FR-04: 라운드트립 보존
- HWPX 읽기 → 쓰기 시 원본과 동일 (데이터 손실 없음)
- 미지원 요소는 GenericElement로 보존
- **수용 기준:** 읽기→쓰기→읽기 결과 동일

### 3.2 비기능 요구사항 (Non-Functional)

#### NFR-01: 플랫폼
- 브라우저 (Chrome, Firefox, Safari 최신 2버전)
- Node.js 20+
- Deno, Bun 호환 (best-effort)

#### NFR-02: 성능
| 파일 크기 | 파싱 시간 | 메모리 |
|-----------|----------|--------|
| 10KB (1페이지) | <50ms | <10MB |
| 100KB (10페이지) | <200ms | <30MB |
| 1MB (100페이지) | <1초 | <100MB |
| 10MB (이미지 다수) | <3초 | <200MB |

#### NFR-03: 번들 크기
- 핵심 패키지 (document-model + hwpx-core + hwpx-parser): **<100KB** gzipped
- 전체 (HWP 리더 포함): **<500KB** gzipped
- Tree-shakeable (사용하지 않는 패키지 제외 가능)

#### NFR-04: 라이선스
- MIT 라이선스 (오픈소스 부분)
- 한컴 저작권 고지 포함
- python-hwpx/pyhwp 코드 비사용 (Non-Commercial/AGPL)

#### NFR-05: 품질
- TypeScript strict mode
- 테스트 커버리지 ≥80%
- CI/CD (GitHub Actions)

---

## 4. 로드맵

### M0: 기반 구축 (Week 1)
> "스펙을 읽고, 뼈대를 세운다"

**목표:** 개발 시작 가능한 상태 만들기

- [ ] HWPML 공식 스펙 분석 → 요소/속성 카탈로그 완성
- [ ] 테스트 픽스처 수집 (HWPX 10종 + HWP 5종)
- [ ] 모노레포 셋업 (Turborepo + pnpm + 6 패키지)
- [ ] CI/CD 파이프라인
- [ ] 공유 문서 모델 타입 정의

**완료 기준:** `pnpm turbo build && pnpm turbo test` 통과

---

### M1: HWPX 읽기 (Week 2)
> "HWPX 파일을 열어서 텍스트를 뽑는다"

**목표:** FR-01 달성

- [ ] OPC 패키지 리더 (ZIP → 파트 추출)
- [ ] 헤더 파서 (글꼴, 스타일, 글자/문단 모양)
- [ ] 본문 파서 (섹션, 단락, 런, 텍스트)
- [ ] 통합 파서 (parseHwpx)

**완료 기준:** 픽스처 HWPX 10종 파싱 성공, 텍스트 추출 일치

**데모:**
```typescript
import { readFile } from 'fs/promises';
import { OpcPackage } from '@handoc/hwpx-core';
import { parseHwpx } from '@handoc/hwpx-parser';

const pkg = await OpcPackage.open(await readFile('document.hwpx'));
const { document } = await parseHwpx(pkg);
document.sections[0].paragraphs.forEach(p => {
  const text = p.runs.map(r => r.children.filter(c => c.type === 'text').map(c => c.content).join('')).join('');
  console.log(text);
});
```

---

### M2: HWPX 쓰기 (Week 3)
> "프로그래밍으로 HWPX 문서를 만든다"

**목표:** FR-02 + FR-05 달성

- [ ] 헤더 직렬화
- [ ] 본문 직렬화
- [ ] 통합 라이터 (writeHwpx)
- [ ] 빌더 API (HwpxBuilder)

**완료 기준:** 라운드트립 통과, 한컴오피스에서 열기 성공

**데모:**
```typescript
import { HwpxBuilder } from '@handoc/hwpx-writer';
import { writeFile } from 'fs/promises';

const buffer = await new HwpxBuilder('a4')
  .addParagraph('보고서 제목', { bold: true, fontSize: 18 })
  .addParagraph('본문 내용입니다.')
  .addTable(3, 3)
    .setCell(0, 0, '항목')
    .setCell(0, 1, '수량')
    .end()
  .toBuffer();

await writeFile('output.hwpx', buffer);
```

---

### M3: npm 배포 + 자사 통합 (Week 4)
> "세상에 내놓는다"

**목표:** 첫 npm 배포 + 자사 사용

- [ ] npm 배포 (@handoc/* 4개 패키지)
- [ ] README + 사용 가이드 + API 문서
- [ ] GitHub 레포 공개 (muin-company/handoc)
- [ ] 자사 제품에 통합 (검시AI 등)

**완료 기준:** npm에서 `npm install @handoc/hwpx-parser` 가능

**성공 지표:**
- npm 주간 다운로드 100+
- GitHub 스타 50+
- 자사 제품 1개 이상에서 사용

---

### M4: HWP 5.x → HWPX 변환 (필요 시)
> "레거시도 지원한다 — HWPX 파이프라인 위에"

**전제:** M1-M3 완료, HWP 5.x 수요 확인 시

- [ ] OLE2/CFB → HWPX 변환 레이어
- [ ] 변환 후 기존 HWPX 파서로 처리 (단일 파이프라인)

**핵심:** HWP 전용 파서를 만들지 않음. HWPX 변환만.

---

### M5: 시장 진입 (Week 5-8)
> "개발자 생태계를 만든다"

- [ ] 기술 블로그 포스트 시리즈 ("HWP 포맷 해부기")
- [ ] dev.to / Hacker News 게시
- [ ] 한국 개발자 커뮤니티 홍보 (GeekNews, 44bits, 카카오 오픈챗)
- [ ] 이슈/PR 대응 (AI 에이전트 활용 → 시간 단위 응답)
- [ ] 공공데이터포털 HWP 파일 호환성 테스트 확대

**성공 지표:**
- npm 주간 다운로드 1,000+
- GitHub 스타 300+
- 외부 컨트리뷰터 등장

---

### M6: 유료 제품 출시 (Week 9-14)
> "1%의 가치를 판다"

- [ ] HanDoc Cloud (SaaS 변환 API)
- [ ] 웹 뷰어 컴포넌트 (React)
- [ ] 엔터프라이즈 지원 패키지
- [ ] 가격 페이지 + 결제 시스템

**성공 지표:**
- 유료 고객 1명
- MRR $100+

---

### M7: 웹 에디터 (Week 15+)
> "한컴오피스를 대체한다"

- [ ] 문서 렌더링 엔진
- [ ] 편집 기능
- [ ] 실시간 협업

**이 단계는 M5-M6 성과에 따라 Go/No-Go 결정**

---

## 5. 성공 지표 요약

| 시점 | 지표 | 목표 |
|------|------|------|
| M3 (4주) | npm 배포 | 4개 패키지 라이브 |
| M3 (4주) | 자사 사용 | 검시AI에서 HWPX 처리 |
| M5 (8주) | npm 주간 다운로드 | 1,000+ |
| M5 (8주) | GitHub 스타 | 300+ |
| M6 (14주) | 첫 유료 고객 | 1+ |
| M6 (14주) | MRR | $100+ |
| M7 (15주+) | Go/No-Go | M5-M6 성과 기반 결정 |

---

## 6. 리스크 & 의사결정 포인트

| 리스크 | 대응 | 의사결정 시점 |
|--------|------|-------------|
| HWP 호환성 90% 미달 | hwp.js(Apache-2.0) 통합 또는 @ohah/hwpjs 래핑 | M3 완료 시 |
| 개발자 채택 부진 | 마케팅 강화 또는 피벗 (내부 도구로 한정) | M5 완료 시 |
| 유료 전환 실패 | 오픈소스 명성만으로 가치 (브랜드) | M6 완료 시 |
| 한컴 법적 리스크 | 공식 스펙만 사용, 저작권 고지 명시 | 상시 |
| AI 지원 비용 > 수익 | 지원 범위 축소 또는 가격 조정 | M6 이후 |

---

## 7. 원칙

1. **오픈소스 우선** — 핵심은 무조건 공개. 숨기면 생태계가 안 만들어짐.
2. **자사 사용 우선** — 우리가 안 쓰는 제품을 남이 쓸 리 없음.
3. **AI 에이전트 = 경쟁 우위** — 이슈 응답 시간, 문서 품질, 릴리스 속도에서 차이.
4. **점진적 호환성** — 100% 완벽보다 90% 빠르게. 나머지 10%는 피드백으로.
5. **1%의 가치에 집중** — 무료로 줄 수 없는 가치가 무엇인지 항상 질문.

---

*HanDoc — HWP를 웹으로. 99% 무료, 1% 가치.*
