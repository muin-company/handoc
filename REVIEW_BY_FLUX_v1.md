# HanDoc 폴더 검토 — Flux 리뷰 (2026-02-20)

> 폴더: /Users/wkim/Dropbox/clawd-home/20260220/handoc/
> 목적: AI 에이전트 자율 구현 관점에서 부족한 부분 철저 검토
> 기준: docs/REQUIREMENTS.md, MASTER-PLAN.md, EXECUTION-PLAN.md, 현재 코드 상태
> 상태: Phase 1 (Level 1 Core Library) 초기 구현 (파서 ~70%, writer ~10%)

---

## 1. 전체 평가
**자율 에이전트 구현 가능성: 7.5/10**  
- **강점**: 계획서 상세 (MASTER-PLAN.md에 태스크/ID/의존/검증까지). pnpm monorepo 구조 좋음. document-model 타입 정의 탄탄.
- **약점**: 테스트 픽스처/라운드트립 검증 미완. writer 미구현. 빌드 에러 (hwpx-parser Buffer). 실제 349개 문서 테스트 미실시.
- **자율성 블로커**: 테스트 커버리지 낮음 (22개 테스트, 텍스트 추출률 76%). 변경 시 회귀 검증 불가.

**추천**: 다음 2일 내 TASK-001 (빌드 수정) + TASK-011 (픽스처 10개 생성) 완료 후 자율 에이전트 투입 가능.

---

## 2. 부족한 부분 상세 (우선순위 순)

### 🔴 블로커 (자율성 0)
| # | 부족 | 영향 | 조치 (에이전트 태스크) |
|---|------|------|-----------------------|
| B1 | hwpx-parser 빌드 실패 (Buffer 타입) | 빌드 불가 | TASK-001: Buffer → Uint8Array 교체, 30분 |
| B2 | fixtures/에 실제 .hwpx 파일 없음 (expected JSON만) | 테스트 불가 | TASK-011: python-hwpx로 10개 픽스처 생성, 3시간 |
| B3 | 라운드트립 테스트 없음 (parse→write→parse) | writer 검증 불가 | TASK-007 후 추가, 2시간 |

### 🟠 높음 (자율성 50%)
| # | 부족 | 영향 | 조치 |
|---|------|------|------|
| H1 | 텍스트 추출률 76% (265/349) | 핵심 기능 미달 | TASK-002~004: 중첩/특수 텍스트 추출 개선, 9시간 |
| H2 | writer 미구현 (1줄 placeholder) | 읽기만, 쓰기 불가 | TASK-005~007: 헤더/본문/통합 라이터, 13시간 |
| H3 | 크로스 밸리데이션 스크립트 미완 | python-hwpx와 비교 불가 | scripts/cross-validate.ts 구현, 2시간 |
| H4 | coverage-tracker.json 미사용 | XML 요소 커버리지 추적 불가 | 스크립트 구현, 1시간 |

### 🟡 중간 (자율성 80%)
| # | 부족 | 영향 | 조치 |
|---|------|------|------|
| M1 | npm 배포 준비 미흡 (README 빈약, CHANGELOG 없음) | 퍼블리시 불가 | TASK-012: 문서화, 2시간 |
| M2 | HWP 5.x 미지원 | HWP 바이너리 처리 불가 | TASK-013~015: CFB + DocInfo 파서, 24시간 (선택) |
| M3 | 에러/경고 시스템 미완 (ParseWarning 타입만) | 디버깅 어려움 | 파서에 warning 배열 추가, 2시간 |
| M4 | 성능 측정 없음 | 최적화 지표 부재 | scripts/benchmark.ts, 1시간 |

### 🟢 낮음 (자율성 90%+)
| # | 부족 | 영향 | 조치 |
|---|------|------|------|
| L1 | CI 워크플로우 기본 (ci.yml) | PR 자동화 부족 | GitHub Actions 강화, 1시간 |
| L2 | API 문서 없음 | 사용법 불명확 | JSDoc + typedoc, 2시간 |
| L3 | 세부 요소 파싱 미완 (표/이미지/변경추적) | 고급 기능 제한 | TASK-008~010, 14시간 |

---

## 3. 자율 에이전트 구현 로드맵 (추천 순서)

**Day 1 (블로커 제거, 8h):**
1. TASK-001 (빌드 수정)
2. TASK-011 (픽스처 생성)
3. scripts/cross-validate.ts 구현

**Day 2 (파서 완성, 12h):**
4. TASK-002~004 (텍스트 추출 95%)
5. TASK-003 (중첩 구조)

**Day 3~4 (writer, 18h):**
6. TASK-005~007 (라운드트립 80%)

**Day 5 (npm 배포, 4h):**
7. TASK-012

**총 42h → 5일 (에이전트 4명 병렬 2일)**

### 자율성 확보 핵심
- **태스크 단위 독립**: 각 태스크 의존 명확, 검증 스크립트 있음.
- **회귀 방지**: turbo test/build로 자동화.
- **디버깅 도구**: scripts/debug-hwpx.ts, compare-parse.py.
- **커버리지 트래커**: 변경 시 status 업데이트.

**현재 코드 상태 (실측):**
- 코드량: 1,304줄 (17 파일)
- 테스트: 22개 (pass)
- 빌드: 3/4 패키지 성공
- 텍스트 추출: 76% (개선 필요)

---

## 4. 추가 권장 (자율성 10/10으로 끌어올리기)

1. **에이전트용 README**: 각 패키지에 "이 패키지 태스크는 이 명령으로 검증" 섹션 추가.
2. **자동 태스크 할당**: turbo.json에 태스크 그룹화.
3. **실제 문서 349개 자동 테스트**: scripts/test-real-docs.ts 완성.
4. **GitHub Actions PR 검증**: 변경 PR 시 자동 빌드/테스트/커버리지 체크.

**결론:** 블로커 3개만 제거하면 자율 에이전트가 안정적으로 작업 가능. Level 1 완료 후 Level 2 병렬 시작 추천.

